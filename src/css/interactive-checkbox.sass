@use "globals" as *

$x-checkbox-height: 24px
$x-checkbox-check-height: 12px
$x-checkbox-transition-duration: 75ms

@function feather-check-base64($stroke-width: 2, $color: currentColor)
  @return url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' width='24' height='24' class='feather feather-check' fill='none' stroke='#{$color}' stroke-linecap='round' stroke-linejoin='round' stroke-width='#{$stroke-width}'%3E%3Cpolyline points='20 6 9 17 4 12' /%3E%3C/svg%3E%0A")

.interactive-checkbox
  position: relative
  height: $x-checkbox-height
  width: $x-checkbox-height
  background-color: white
  border-radius: 1e3px
  box-shadow: $hairline-shadow, $realistic-shadow
  &[aria-checked=true]
    box-shadow: $realistic-shadow
  &::before
    content: ""        // Pseudo reset
    position: absolute // Pseudo reset
    inset: 0           // Pseudo reset
    background-color: dodgerblue
    border-radius: inherit
    transform: scale(0)
    opacity: 0
    transition: transform $x-checkbox-transition-duration cubic-bezier(0, 1, 0, 1.25), opacity $x-checkbox-transition-duration cubic-bezier(0, 1, 0, 1.25)
  // Note: Can't use nesting here
  // because of pseudo
  &[aria-checked=true]::before
    transform: scale(1)
    opacity: 1
  &::after
    content: ""        // Pseudo reset
    position: absolute // Pseudo reset
    inset: 0           // Pseudo reset
    margin: auto       // Pseudo reset
    height: $x-checkbox-check-height
    width: $x-checkbox-check-height
    background: feather-check-base64($stroke-width: 8, $color: white) 0% 0% / 100% 100%
    transform: scale(0)
    opacity: 0
    transition: transform $x-checkbox-transition-duration * 1.5 cubic-bezier(0, 1, 0, 1.25), opacity $x-checkbox-transition-duration * 1.5 cubic-bezier(0, 1, 0, 1.25)
  // Note: Can't use nesting here
  // because of pseudo
  &[aria-checked=true]::after
    transform: scale(1)
    opacity: 1
